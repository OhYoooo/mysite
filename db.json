{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/ocean/source/404.html","path":"404.html","modified":0,"renderable":1},{"_id":"themes/ocean/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"source/images/IMG_0504.JPG","path":"images/IMG_0504.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0606.JPG","path":"images/IMG_0606.JPG","modified":0,"renderable":0},{"_id":"themes/ocean/source/css/404.styl","path":"css/404.styl","modified":0,"renderable":1},{"_id":"themes/ocean/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/ocean/source/fancybox/jquery.fancybox.min.css","path":"fancybox/jquery.fancybox.min.css","modified":0,"renderable":1},{"_id":"themes/ocean/source/images/hexo-inverted.svg","path":"images/hexo-inverted.svg","modified":0,"renderable":1},{"_id":"themes/ocean/source/images/hexo.svg","path":"images/hexo.svg","modified":0,"renderable":1},{"_id":"themes/ocean/source/js/busuanzi-2.3.pure.min.js","path":"js/busuanzi-2.3.pure.min.js","modified":0,"renderable":1},{"_id":"themes/ocean/source/js/lazyload.min.js","path":"js/lazyload.min.js","modified":0,"renderable":1},{"_id":"themes/ocean/source/js/ocean.js","path":"js/ocean.js","modified":0,"renderable":1},{"_id":"themes/ocean/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/ocean/source/js/pace.min.js","path":"js/pace.min.js","modified":0,"renderable":1},{"_id":"themes/ocean/source/fancybox/jquery.fancybox.min.js","path":"fancybox/jquery.fancybox.min.js","modified":0,"renderable":1},{"_id":"themes/ocean/source/js/jquery-2.0.3.min.js","path":"js/jquery-2.0.3.min.js","modified":0,"renderable":1},{"_id":"themes/ocean/source/css/feathericon/feathericon.eot","path":"css/feathericon/feathericon.eot","modified":0,"renderable":1},{"_id":"themes/ocean/source/css/feathericon/feathericon.ttf","path":"css/feathericon/feathericon.ttf","modified":0,"renderable":1},{"_id":"themes/ocean/source/css/feathericon/feathericon.woff","path":"css/feathericon/feathericon.woff","modified":0,"renderable":1},{"_id":"themes/ocean/source/css/feathericon/feathericon.woff2","path":"css/feathericon/feathericon.woff2","modified":0,"renderable":1},{"_id":"themes/ocean/source/images/ocean/overlay-hero.png","path":"images/ocean/overlay-hero.png","modified":0,"renderable":1},{"_id":"source/images/IMG_1891.JPG","path":"images/IMG_1891.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2148.JPG","path":"images/IMG_2148.JPG","modified":0,"renderable":0},{"_id":"source/images/futako010010.JPG","path":"images/futako010010.JPG","modified":0,"renderable":0},{"_id":"themes/ocean/source/css/feathericon/feathericon.svg","path":"css/feathericon/feathericon.svg","modified":0,"renderable":1},{"_id":"source/images/IMG_0874.JPG","path":"images/IMG_0874.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_4200.JPG","path":"images/IMG_4200.JPG","modified":0,"renderable":0},{"_id":"themes/ocean/source/images/forrestgump.png","path":"images/forrestgump.png","modified":0,"renderable":1},{"_id":"source/images/IMG_0444.JPG","path":"images/IMG_0444.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_4201.JPG","path":"images/IMG_4201.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0875.JPG","path":"images/IMG_0875.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_1333.JPG","path":"images/IMG_1333.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0226.JPG","path":"images/IMG_0226.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0518.JPG","path":"images/IMG_0518.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2194.JPG","path":"images/IMG_2194.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2221.JPG","path":"images/IMG_2221.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0637.JPG","path":"images/IMG_0637.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2151.JPG","path":"images/IMG_2151.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0222.JPG","path":"images/IMG_0222.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2192.JPG","path":"images/IMG_2192.JPG","modified":0,"renderable":0},{"_id":"themes/ocean/source/images/ocean/ocean.ogv","path":"images/ocean/ocean.ogv","modified":0,"renderable":1},{"_id":"source/images/IMG_0873.JPG","path":"images/IMG_0873.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2209.JPG","path":"images/IMG_2209.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_1331.JPG","path":"images/IMG_1331.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2195.JPG","path":"images/IMG_2195.JPG","modified":0,"renderable":0},{"_id":"source/images/futako010029.JPG","path":"images/futako010029.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0077.JPG","path":"images/IMG_0077.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0605.JPG","path":"images/IMG_0605.JPG","modified":0,"renderable":0},{"_id":"source/images/futako010013.JPG","path":"images/futako010013.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_2200.JPG","path":"images/IMG_2200.JPG","modified":0,"renderable":0},{"_id":"source/images/IMG_0519.JPG","path":"images/IMG_0519.JPG","modified":0,"renderable":0},{"_id":"source/images/futako010041.JPG","path":"images/futako010041.JPG","modified":0,"renderable":0},{"_id":"themes/ocean/source/images/ocean/ocean.png","path":"images/ocean/ocean.png","modified":0,"renderable":1},{"_id":"themes/ocean/source/images/ocean/ocean.webm","path":"images/ocean/ocean.webm","modified":0,"renderable":1},{"_id":"themes/ocean/source/images/ocean/ocean.mp4","path":"images/ocean/ocean.mp4","modified":0,"renderable":1},{"_id":"source/images/redux-saga.JPG","path":"images/redux-saga.JPG","modified":0,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"edb84d6e04b9dafeb71522637ce46e996a92fd81","modified":1556430674209},{"_id":"themes/ocean/.DS_Store","hash":"2fb0d01d641008ef2c2bc47b2d0e770bcb2c98b9","modified":1556362284450},{"_id":"themes/ocean/README.md","hash":"0a5f44c3b9f6757ffdb3576f57afa53f203ea985","modified":1556351608519},{"_id":"themes/ocean/_config.yml","hash":"6bda58f2eadaf5a90c01ee56f6ee7f7cded7d441","modified":1556426688316},{"_id":"themes/ocean/package.json","hash":"b993176f8c35bc3ab9dbd8642ec6cd125fcb447e","modified":1556351608530},{"_id":"source/_posts/A-Brief-Introduce-to-Redux-Saga.md","hash":"7cc27c8e3147f1a81f53937d885ce0e76967beaf","modified":1556521063253},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1556351500239},{"_id":"source/about/index.md","hash":"d91209004b506f3aa81f86f94a6482e1138aaeac","modified":1556364296199},{"_id":"source/gallery/index.md","hash":"81878942167add6fa3ed58c994176e6573a859d8","modified":1556357667537},{"_id":"source/images/.DS_Store","hash":"6d6ede6830b2e753d22075283fef3e451dd9bfe0","modified":1556357497987},{"_id":"themes/ocean/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1556351608519},{"_id":"themes/ocean/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1556351608519},{"_id":"themes/ocean/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1556351608520},{"_id":"themes/ocean/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1556351608520},{"_id":"themes/ocean/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1556351608520},{"_id":"themes/ocean/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1556351608520},{"_id":"themes/ocean/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1556351608520},{"_id":"themes/ocean/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1556351608521},{"_id":"themes/ocean/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1556351608521},{"_id":"themes/ocean/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1556351608521},{"_id":"themes/ocean/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1556351608521},{"_id":"themes/ocean/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1556351608521},{"_id":"themes/ocean/layout/.DS_Store","hash":"acf7fef488db0d4e3170f1ce64478a72a6dd681a","modified":1556362284452},{"_id":"themes/ocean/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1556351608528},{"_id":"themes/ocean/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1556351608528},{"_id":"themes/ocean/layout/index.ejs","hash":"dead30ea8014348cef977dcb44eea0ae0f0601c5","modified":1556351608529},{"_id":"themes/ocean/layout/layout.ejs","hash":"9ce598d82d973518e255fe64019b8523a2d65796","modified":1556351608529},{"_id":"themes/ocean/layout/page.ejs","hash":"a9a48ae63f5d68a36382951166fdd6e482b901f1","modified":1556351608529},{"_id":"themes/ocean/layout/post.ejs","hash":"a9a48ae63f5d68a36382951166fdd6e482b901f1","modified":1556351608530},{"_id":"themes/ocean/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1556351608530},{"_id":"themes/ocean/source/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1556351608533},{"_id":"themes/ocean/source/404.html","hash":"fe1497ac9b2d47f4e3e880946e22fbfe3db7496e","modified":1556351608533},{"_id":"themes/ocean/source/favicon.ico","hash":"0f20298a6a4d1ebd7a7ae7b87d7a3ae9afec0623","modified":1556351608546},{"_id":"source/images/IMG_0504.JPG","hash":"bdd3c4dcc7e813685793a2226728b0c60fb653b9","modified":1556355556624},{"_id":"source/images/IMG_0606.JPG","hash":"1aa6473addf50803fef60b42e90cdb2d71113db8","modified":1556355554985},{"_id":"themes/ocean/layout/_partial/after-footer.ejs","hash":"9b985a9e230b1e0243b9ce2ec79cdb07f4c8e007","modified":1556353600250},{"_id":"themes/ocean/layout/_partial/archive-post.ejs","hash":"8f46a5a73c95827d812ca3e90ebb0ad8f16fb7b2","modified":1556351608522},{"_id":"themes/ocean/layout/_partial/archive.ejs","hash":"6c6cf7d1acb6548396183ce4836f1f9a3a1a4d10","modified":1556351608523},{"_id":"themes/ocean/layout/_partial/article.ejs","hash":"0836e20d6f6785a7c1e1e559de194df8dd395b4c","modified":1556351608523},{"_id":"themes/ocean/layout/_partial/footer.ejs","hash":"259129dfc8a952f81be494751982dc3d2c763037","modified":1556360249353},{"_id":"themes/ocean/layout/_partial/head.ejs","hash":"b8174a6094f859ce82e8af2f1b30e1ce03fd0eb2","modified":1556351608524},{"_id":"themes/ocean/layout/_partial/ocean.ejs","hash":"be76e0cbc4ecd9171972fabed6830cb592b5b343","modified":1556351608524},{"_id":"themes/ocean/layout/_partial/sidebar.ejs","hash":"6e5fadba43415d4605593674591cce822b6fb8bf","modified":1556351608528},{"_id":"themes/ocean/layout/_partial/totop.ejs","hash":"70176e319a1558c8b61abecfedbbc08b258e7beb","modified":1556351608528},{"_id":"themes/ocean/source/css/404.styl","hash":"25bf5e29c00d57f90f30673912e13478e47db69c","modified":1556514756850},{"_id":"themes/ocean/screenshots/hexo-theme-ocean.jpg","hash":"13b5045d2120cac2f68849757f5e0af08938b7c6","modified":1556351608532},{"_id":"themes/ocean/source/css/_extend.styl","hash":"1fb5b31668579d177b340e03a78136bc04e22a36","modified":1556513611196},{"_id":"themes/ocean/source/css/_feathericon.styl","hash":"8494f0e869411781264868f08eda62fd838e0cee","modified":1556351608534},{"_id":"themes/ocean/source/css/_mixins.styl","hash":"fbe77673e6f8c714a90daabba6c94cf491650887","modified":1556351608535},{"_id":"themes/ocean/source/css/_normalize.styl","hash":"b3337320133b7a336db7033aa6bbe94b054c0b21","modified":1556351608535},{"_id":"themes/ocean/source/css/_variables.styl","hash":"a91de5d66d44a31b7ea7b2e918e47f9d7c662434","modified":1556514844779},{"_id":"themes/ocean/source/css/style.styl","hash":"e01e1b4e5350c162f3bec32dc5befbad7b7914ec","modified":1556351608544},{"_id":"themes/ocean/source/fancybox/jquery.fancybox.min.css","hash":"2e6a66987dbc7a57bbfd2655bce166739b4ba426","modified":1556351608545},{"_id":"themes/ocean/source/images/hexo-inverted.svg","hash":"525309ea3c7360f83d1d9df6d04c256d7171950d","modified":1556351608548},{"_id":"themes/ocean/source/images/hexo.svg","hash":"71e7204d04ccfe260f06ea5873484791cd5f404a","modified":1556351608549},{"_id":"themes/ocean/source/js/busuanzi-2.3.pure.min.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1556351608607},{"_id":"themes/ocean/source/js/lazyload.min.js","hash":"b801b3946fb9b72e03512c0663458e140e1fa77b","modified":1556351608608},{"_id":"themes/ocean/source/js/ocean.js","hash":"3457be62843930ad58997cd6fd387783285242c7","modified":1556351608609},{"_id":"themes/ocean/source/js/search.js","hash":"118be0e0918532ac1225f62e1a0a6f0673e0b173","modified":1556351608610},{"_id":"themes/ocean/source/js/pace.min.js","hash":"d32ab818e0f97d3b0c80f5631fc23d8a0cb52795","modified":1556351608609},{"_id":"themes/ocean/source/css/_partial/comment.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1556351608536},{"_id":"themes/ocean/source/fancybox/jquery.fancybox.min.js","hash":"b2b093d8f5ffeee250c8d0d3a2285a213318e4ea","modified":1556351608546},{"_id":"themes/ocean/source/js/jquery-2.0.3.min.js","hash":"800edb7787c30f4982bf38f2cb8f4f6fb61340e9","modified":1556351608608},{"_id":"themes/ocean/layout/_partial/post/albums.ejs","hash":"dcfea9a328f5e1d90758ac71d7d7555b31b93bcb","modified":1556351608525},{"_id":"themes/ocean/layout/_partial/post/busuanzi.ejs","hash":"88462d160479cc3f0cc58efcd888fbaf22b0d4d8","modified":1556351608525},{"_id":"themes/ocean/layout/_partial/post/category.ejs","hash":"85f0ebeceee1c32623bfa1e4170dbe1e34442fea","modified":1556351608525},{"_id":"themes/ocean/layout/_partial/post/date.ejs","hash":"6197802873157656e3077c5099a7dda3d3b01c29","modified":1556351608526},{"_id":"themes/ocean/layout/_partial/post/gallery.ejs","hash":"5f8487fe7bed9a09001c6655244ff35f583cf1eb","modified":1556351608526},{"_id":"themes/ocean/layout/_partial/post/gitalk.ejs","hash":"e36d149ad83c3a52562dbef61a0083957eb24578","modified":1556351608526},{"_id":"themes/ocean/layout/_partial/post/nav.ejs","hash":"e59198918e92ef92156aeefbf6023584ac1cae64","modified":1556351608527},{"_id":"themes/ocean/layout/_partial/post/search.ejs","hash":"2c9d19d1685e834aa2020998da2a2d259ce9b9ff","modified":1556351608527},{"_id":"themes/ocean/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1556351608527},{"_id":"themes/ocean/layout/_partial/post/title.ejs","hash":"f8c9cb35d8d1975aa3b457d9a92f38c462e97732","modified":1556351608527},{"_id":"themes/ocean/source/css/_partial/albums.styl","hash":"0659d5f7469f24a415354ff767d949926465d515","modified":1556351608535},{"_id":"themes/ocean/source/css/_partial/archive.styl","hash":"8aefdcf2d542ad839018c2c58511e3318a38490d","modified":1556351608536},{"_id":"themes/ocean/source/css/_partial/article.styl","hash":"93905de0339f3e831a383739bdc477c29c1914c4","modified":1556351608536},{"_id":"themes/ocean/source/css/_partial/articles.styl","hash":"7bf289013d304505984b251be725b49165a694fd","modified":1556351608536},{"_id":"themes/ocean/source/css/_partial/float.styl","hash":"d888df89a172e4c8119cb8740fc1eae1a9539157","modified":1556351608537},{"_id":"themes/ocean/source/css/_partial/footer.styl","hash":"24779cbce1012d4f35ffc6b3ec0830cbc2ea3b3f","modified":1556351608537},{"_id":"themes/ocean/source/css/_partial/gallery.styl","hash":"7bdc2c9fb4971dbd7511c5cbb69bd611f20db591","modified":1556351608537},{"_id":"themes/ocean/source/css/_partial/gitalk.styl","hash":"3706eef2e0541493f1679a30241d279e29dfdc17","modified":1556351608537},{"_id":"themes/ocean/source/css/_partial/highlight.styl","hash":"c6e99fd23056fb01177aeefbc5dd4a8e88cf8f81","modified":1556351608538},{"_id":"themes/ocean/source/css/_partial/layou.styl","hash":"47a8a98aaaf7db4d2d89b8c41b43394d1cc92849","modified":1556351608538},{"_id":"themes/ocean/source/css/_partial/lists.styl","hash":"087f08e0ce9aca48e096dabca6eed2368b5bcd6b","modified":1556351608538},{"_id":"themes/ocean/source/css/_partial/mobile.styl","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1556351608539},{"_id":"themes/ocean/source/css/_partial/navbar.styl","hash":"fb32443da45975567ebae8683c18f0cda0aa0a3d","modified":1556351608539},{"_id":"themes/ocean/source/css/_partial/ocean.styl","hash":"6c68a00bcd69853711db48f5fdd02544d8a6152e","modified":1556351608539},{"_id":"themes/ocean/source/css/_partial/pace.styl","hash":"e326918ba276ee332d0598d8193ccd8353e7d916","modified":1556351608540},{"_id":"themes/ocean/source/css/_partial/search.styl","hash":"a81fe253dae61b114d9cdb15673d1588aae35285","modified":1556513307655},{"_id":"themes/ocean/source/css/_partial/sidebar.styl","hash":"600c70f1de82da5223af290d47a583f9c379d188","modified":1556351608540},{"_id":"themes/ocean/source/css/_partial/totop.styl","hash":"69fcb0c9adb45f592838c3babc58d3490f413db2","modified":1556351608541},{"_id":"themes/ocean/source/css/feathericon/feathericon.eot","hash":"e2a01ae6f849841bc7a9fd21e5b7b450f1ded19b","modified":1556351608542},{"_id":"themes/ocean/source/css/feathericon/feathericon.ttf","hash":"d0d80c3c960d7d45e6bd7fa428d8a6a8c8245b2d","modified":1556351608543},{"_id":"themes/ocean/source/css/feathericon/feathericon.woff","hash":"d22fe861e47afd92969ab46c7cbb7ea9c225aaf8","modified":1556351608544},{"_id":"themes/ocean/source/css/feathericon/feathericon.woff2","hash":"2c11c45331d914ee38ad42ccf966132a508b5596","modified":1556351608544},{"_id":"themes/ocean/source/images/ocean/overlay-hero.png","hash":"92481a1848c35be96a693af11f77265323a7c189","modified":1556351608606},{"_id":"source/images/IMG_1891.JPG","hash":"676dcaf369929ef6b3d9ec8e8f7cf088c8ecdae4","modified":1556357445197},{"_id":"source/images/IMG_2148.JPG","hash":"9f08338b4842b7853a7132a098c0d2440afc8fd8","modified":1556356922750},{"_id":"source/images/futako010010.JPG","hash":"6f13fba723f69932261d8db10e2af818aa52dac4","modified":1556356904280},{"_id":"themes/ocean/source/css/feathericon/feathericon.svg","hash":"c113006c6822451802c8457128c352c0e4934453","modified":1556351608543},{"_id":"source/images/IMG_0874.JPG","hash":"09ef9b6fe4b1f11b2adc52865f98a66f79bdbe58","modified":1556357450715},{"_id":"source/images/IMG_4200.JPG","hash":"b66b09b2026648ca9bff1b9d7f3adbbe0f5a0413","modified":1556357449003},{"_id":"themes/ocean/source/images/forrestgump.png","hash":"18ad6a8ba815878e36a0d5562136dc4fb8920c12","modified":1556351608548},{"_id":"source/images/IMG_0444.JPG","hash":"a07f11160a4ff6ebfdbc4faf25868ea8c3f18b71","modified":1556356906367},{"_id":"source/images/IMG_4201.JPG","hash":"df6d4734798dbbe1b22e82864ab38739fecce8d3","modified":1556357442956},{"_id":"source/images/IMG_0875.JPG","hash":"de4c08db2a5751996b99fbc8dfded7c53da935f9","modified":1556357449935},{"_id":"source/images/IMG_1333.JPG","hash":"176423f03fdb3bf5e56643027cf01005a5eb2a74","modified":1556357447915},{"_id":"source/images/IMG_0226.JPG","hash":"08238c849695d9214b2f5b8d807a9f5c22d805cd","modified":1556356907611},{"_id":"source/images/IMG_0518.JPG","hash":"cdf83313366ef6bfedc05f8127d08e4897de5154","modified":1556355555852},{"_id":"source/images/IMG_2194.JPG","hash":"cb802e60eb35ea0e5135c786cef1608b1f32f1c0","modified":1556356920498},{"_id":"source/images/IMG_2221.JPG","hash":"707dfcc82b32818ff8b1d12840a863bca517cd16","modified":1556356919011},{"_id":"source/images/IMG_0637.JPG","hash":"bd5f1d97a0be08a89769b01429a35465e0fc85d7","modified":1556355551809},{"_id":"source/images/IMG_2151.JPG","hash":"a22eccebcc934cb9ce8e4038fee0d39d0469f1a2","modified":1556357444520},{"_id":"source/images/IMG_0222.JPG","hash":"8424385dc15a5f8069190386292cce0fbfdc086f","modified":1556356908641},{"_id":"source/images/IMG_2192.JPG","hash":"e725c4037834f60d40b777244edbeb6de337ad9a","modified":1556356911364},{"_id":"themes/ocean/source/images/ocean/ocean.ogv","hash":"9c6b5d6b0544472cee39f5eafac2d5cbba5fd86b","modified":1556351608579},{"_id":"source/images/IMG_0873.JPG","hash":"e4754500a08ed9a78e9154e67c67eb61daa9d3ab","modified":1556357452650},{"_id":"source/images/IMG_2209.JPG","hash":"0045c460208e70189907588d74542e7dd7a9537b","modified":1556356917888},{"_id":"source/images/IMG_1331.JPG","hash":"1274e2476d4aaa0b24eb6330cdf87e238595c0f2","modified":1556357446640},{"_id":"source/images/IMG_2195.JPG","hash":"dbf948d502538248eef8e73df5418530b8cc891c","modified":1556356912377},{"_id":"source/images/futako010029.JPG","hash":"8438933ed62e1cf5b2db488140fb3d93d6bae0f5","modified":1556356902207},{"_id":"source/images/IMG_0077.JPG","hash":"33b8f580dd1c24eaf7e2c2ed42958638637da02a","modified":1556356909567},{"_id":"source/images/IMG_0605.JPG","hash":"fe5cfd86c45ddba8ac06c7834deb3acb0ca21ba0","modified":1556355554106},{"_id":"source/images/futako010013.JPG","hash":"d2bc5d03172a0664ae145288257d1dac48047cb5","modified":1556356901206},{"_id":"source/images/IMG_2200.JPG","hash":"6741848ea3e666881f9dc9a31efa817207a7a1c2","modified":1556356921703},{"_id":"source/images/IMG_0519.JPG","hash":"af2e9071c8f319b00bf4a84ff6b78e2d413c46b6","modified":1556355557862},{"_id":"source/images/futako010041.JPG","hash":"06474d6fa82c7e0183f90fb6a1660280a87f2d89","modified":1556356903293},{"_id":"themes/ocean/source/images/ocean/ocean.png","hash":"8245d07f812625d19b48ad2d00f8191f2aa4d304","modified":1556351608586},{"_id":"themes/ocean/source/images/ocean/ocean.webm","hash":"65aa2b6483e0151611899e31571057334c60d9e4","modified":1556351608604},{"_id":"themes/ocean/source/images/ocean/ocean.mp4","hash":"1e89cac2d652005d9dafd3ecb4dd460a8ff6d6af","modified":1556351608572},{"_id":"source/images/redux-saga.JPG","hash":"246254876cfd63cdbb5d31523d02d078daecf40e","modified":1556430638342},{"_id":"source/_posts/backup.md","hash":"599320682bd0dc33e8f73f7d8ae3155b2c81540e","modified":1556508944774},{"_id":"source/css/align.css","hash":"c60adb260358f8552ad17d96ca6061774e814ad3","modified":1556509860843},{"_id":"source/_posts/align.css","hash":"c60adb260358f8552ad17d96ca6061774e814ad3","modified":1556509938674}],"Category":[],"Data":[],"Page":[{"title":"About Me","date":"2019-04-27T11:24:18.000Z","_content":"","source":"about/index.md","raw":"---\ntitle: About Me\ndate: 2019-04-27 20:24:18\n---\n","updated":"2019-04-27T11:24:56.199Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjv0i6e270001fhao33h5ukgy","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"My Gallery","date":"2019-04-27T08:49:44.000Z","albums":[["../images/IMG_0504.JPG","Nikko, JP"],["../images/IMG_0518.JPG","Meguro, JP"],["../images/IMG_0519.JPG","Meguro, JP"],["../images/IMG_0605.JPG","Kyoto Yasaka Shrine, JP"],["../images/IMG_0606.JPG","Kyoto Kiyomizu, JP"],["../images/IMG_0637.JPG","Odaiba, JP"],["../images/futako010010.JPG","Futakotawagama, JP"],["../images/futako010013.JPG","Futakotawagama, JP"],["../images/futako010029.JPG","Futakotawagama, JP"],["../images/futako010041.JPG","Futakotawagama, JP"],["../images/IMG_0077.JPG","Kamakura, JP"],["../images/IMG_0222.JPG","Roppongi Hills, JP"],["../images/IMG_0226.JPG","Roppongi Hills, JP"],["../images/IMG_0444.JPG","Nara, JP"],["../images/IMG_2148.JPG","Niagara Falls, CA"],["../images/IMG_2192.JPG","Banff National Parks, CA"],["../images/IMG_2194.JPG","Banff National Parks, CA"],["../images/IMG_2195.JPG","Banff National Parks, CA"],["../images/IMG_2200.JPG","Banff National Parks, CA"],["../images/IMG_2209.JPG","Banff Town, CA"],["../images/IMG_2221.JPG","Banff, Lake Louis, CA"],["../images/IMG_4200.JPG","Waterloo, CA"],["../images/IMG_4201.JPG","Niagara Falls, CA"],["../images/IMG_1331.JPG","Waterloo, CA"],["../images/IMG_1333.JPG","Waterloo, CA"],["../images/IMG_2151.JPG","Niagara Falls, CA"],["../images/IMG_1891.JPG","Montreal, CA"],["../images/IMG_0873.JPG","Dali, CN"],["../images/IMG_0874.JPG","Dali, CN"],["../images/IMG_0875.JPG","Dali, CN"]],"_content":"","source":"gallery/index.md","raw":"---\ntitle: My Gallery\ndate: 2019-04-27 17:49:44\nalbums: [\n    [\"../images/IMG_0504.JPG\", \"Nikko, JP\"],\n    [\"../images/IMG_0518.JPG\", \"Meguro, JP\"],\n    [\"../images/IMG_0519.JPG\", \"Meguro, JP\"],\n    [\"../images/IMG_0605.JPG\", \"Kyoto Yasaka Shrine, JP\"],\n    [\"../images/IMG_0606.JPG\", \"Kyoto Kiyomizu, JP\"],\n    [\"../images/IMG_0637.JPG\", \"Odaiba, JP\"],\n    [\"../images/futako010010.JPG\", \"Futakotawagama, JP\"],\n    [\"../images/futako010013.JPG\", \"Futakotawagama, JP\"],\n    [\"../images/futako010029.JPG\", \"Futakotawagama, JP\"],\n    [\"../images/futako010041.JPG\", \"Futakotawagama, JP\"],\n    [\"../images/IMG_0077.JPG\", \"Kamakura, JP\"],\n    [\"../images/IMG_0222.JPG\", \"Roppongi Hills, JP\"],\n    [\"../images/IMG_0226.JPG\", \"Roppongi Hills, JP\"],\n    [\"../images/IMG_0444.JPG\", \"Nara, JP\"],\n    [\"../images/IMG_2148.JPG\", \"Niagara Falls, CA\"],\n    [\"../images/IMG_2192.JPG\", \"Banff National Parks, CA\"],\n    [\"../images/IMG_2194.JPG\", \"Banff National Parks, CA\"],\n    [\"../images/IMG_2195.JPG\", \"Banff National Parks, CA\"],\n    [\"../images/IMG_2200.JPG\", \"Banff National Parks, CA\"],\n    [\"../images/IMG_2209.JPG\", \"Banff Town, CA\"],\n    [\"../images/IMG_2221.JPG\", \"Banff, Lake Louis, CA\"],\n    [\"../images/IMG_4200.JPG\", \"Waterloo, CA\"],\n    [\"../images/IMG_4201.JPG\", \"Niagara Falls, CA\"],\n    [\"../images/IMG_1331.JPG\", \"Waterloo, CA\"],\n    [\"../images/IMG_1333.JPG\", \"Waterloo, CA\"],\n    [\"../images/IMG_2151.JPG\", \"Niagara Falls, CA\"],\n    [\"../images/IMG_1891.JPG\", \"Montreal, CA\"],\n    [\"../images/IMG_0873.JPG\", \"Dali, CN\"],\n    [\"../images/IMG_0874.JPG\", \"Dali, CN\"],\n    [\"../images/IMG_0875.JPG\", \"Dali, CN\"]\n]\n---\n","updated":"2019-04-27T09:34:27.537Z","path":"gallery/index.html","comments":1,"layout":"page","_id":"cjv0i6e2a0003fhao7y81l6rf","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"A Brief Introduce to Redux Saga","date":"2019-04-28T05:35:50.000Z","photos":["../images/redux-saga.JPG"],"_content":"<div style=\"text-align: justify\">\nIf you are quite experienced with redux, which is a predictable state container for JavaScript applications (**Note:** even thouth React and Redux is a popular combination to build fast and powerful apps, Redux is not necessarily combined with React), you are definitely feeling comfortable with its powerful store which manages all the global states and provides much cleaner logic flows to change them. If you are new to redux, [here](https://redux.js.org/introduction/getting-started) is the guide to dive before we start our topic.</div>\n\n<div style=\"text-align: justify\">\nIn a complex javascript application, asynchronous function is always one of the most annoying part where encounters tons of bugs. If not handle them properly, the app usually ends up with ***call back hell***.\n</div>\n\n## **Haven't heard of *CallBack Hell*?**\n<div style=\"text-align: justify\">Well, in javascript, the only way you can suspend a computation and have the rest operations doing later is to put the rest operations into a callback function. This callback function usually returns a ***Promise*** (And has a type of ***Promise<\\any>***). In order to easily mark those async functions, after ***ES6*** javascript provides extra modifiers ***async*** and ***await***, which actually wraps up the original utilities of promise and makes it more readable to programmers. Hummm, sounds like things are going better... ~~**NO!! It doesn't resolve anything!**~~ The core problem leads to a callback hell is the hierarchical async calls, for example</div>\n\nyou have some simple synchronous functions which are in a chain to accomplish some logics:\n```javascript\na = getSomething( );\nb = getMore(a);\nc = getMoreAndMore(b);\n...\n```\n<div style=\"text-align: justify\">It looks fine for now, but what if they all turn out to be async? Then you have to follow the callback style to make them operate one right after another is done:</div>```javascript\ngetSomthing( function( a ) {\n    getMore( a, function( b ) {\n        getMoreAndMore( b, function( c ) {\n            //keep going...\n        });\n    });\n});\n```\nOr you prefer ***ES6***:\n```javascript\nasync function getSomething( a ) {\n    await b = ToDo( a );\n    return await getMore( ( b ) => {\n        return await ToDo( b );\n    }).then( ( c ) => {\n        return await ToDo( c );\n    }).then(...);\n}\n```\nLooks really confused? This will getting even uglier if we are using callbacks in loops. \n</br>\n## Redux Thunks\n<div style=\"text-align: justify\">Back to our redux app, we usually want to update some states after an async call to inform the UI that the data is ready to be fetched. That is always achieved by dispatching an action from the component to the reducer:</div>```javascript\nasync const callAPI = ( ) => {\n    ...\n    return response;\n}\n...\nasync const updateUI = ( ...params ) => {\n    const res = await callAPI( );\n    if (res.status === 200)\n        dispatch( {type: \"UPDATE\", isSuccess: true} );\n}\n...\nrender ( ) {\n    ...\n    this.props.isSuccess?\n        showData( ) : showError( )\n}\n```\n<div style=\"text-align: justify\">This isn't bad, but we are always looking for something better. An advanced way to rewrite it is using redux middleware. ***Middleware*** is somewhere you can put the code after the framework receives a request and before it generates a response. For example, we want to add a logger in the redux store so that when the store catches an action, before it returns the new state, the logger can log the previous state and the new generated state. This is what can be added as a middleware:</div>```javascript\nfunction logger( store ) {\n    return function wrapDispatch ( next ) {\n        return function dispatchAndLog ( action ) {\n            console.log( \"dispatching.. \", action );\n            let result = next( action );\n            console.log( \"new state\", store.getState( ) );\n            return result;\n        }\n    }\n}\n```\n<div style=\"text-align: justify\">There are more advanced ways to add a logger. If you are interested, please refer to the [offical documentation](https://redux.js.org/advanced/middleware). With our middleware, the previous example can be written in a cleaner way:</div>```javascript\nconst callAPI = ( ) => {\n    return( ( dispatch ) => {\n        dispatch( startCallingApiAction );\n        actualCallApi( ).then( data => {\n            dispatch(successAction( data ));\n        }).fail( err => {\n            dispatch( failedAction(err) );\n        });\n    });\n}\n```\n<div style=\"text-align: justify\">The successful response data is wrapped in the payload of the action, sent to the reducer. Once the store updates the data, it will be mapped as a prop back to the component and request for a rerender. This middleware is also called ***thunk***. By applying thunk to decouple the presentation layer, we can get rid of most of the side effects in components, instead, managing and orchestrating side effects in thunks.</div>\n<div style=\"text-align: justify\">This is great, so why are we even considering ***saga***? Well, one of the advantages of middleware is that it can be chained. Every middleware mounted in redux store starts an individual thread (or something really looks like a thread in ***NodeJS***). When a middleware captures an action and handles its side effect, it can dispatch a new action to another middleware to do nested logics. This behavior of middleware indicates that thunks can be chained as well, for example thunkA forwards its return payload to thunkB and thunkB forwards its return payload to... **Wait! That sounds quite familiar!! Is that the case of callback hell??** Unfortunately, a good thing plus another good feature doesn't always end up with something better. ~~It could be some shit as well (笑)~~ In this case, true, this is exactly the callback hell.</div></br>\n## Redux Saga\n<div style=\"text-align: justify\">To handle the possible endless callback functions and also to make it more easily to test in a component which has complicated logics, we need to change our previous thoughts. Just like shifting from Process Oriented Programming to Object Oriented Programming, instead of telling the application how to handle the side effects, suppose it already knows how to call a function and how to dispatch an action, all we need to do is to **give instructions about what to do next** and we don't care about how those instructions will be executed (Saga handles the executions).</div>\nThen the thunks example can be changed as following:\n```javascript\nexport function* apiSideEffect( action ) {\n    try{\n        const data = yield call( actualCallApi );\n        yield put({ type: \"SUCCESS\", payload: data });\n    } catch ( err ) {\n        yield put({ type: \"FAILED\", payload: err });\n    }\n}\n\nexport function* apiSaga( ) {\n    yield takeEvery( \"CLICK_TO_CALL_API\", apiSideEffect );\n}\n```\nThere are serval fucntions already being integrated in Saga:\n>***Call:*** the method call will return only a plain object describing the operation so redux-saga can take care of the invocation and returns the result to the generator. The first parameter is the generator function ready to be called and the rest params are all the arguments in the generator.\n\n>***Put:*** Instead of dispatching an action inside the generator (Don't ever ever do that), ***put*** Returns an object with instructions for the middleware to dispatch the action.\n\n>***Select:*** Returns value from the selector function, similar with **getState( )**. ***Note:*** It is not recommended to use this function because it returns the value corresponding to the contents of the store state tree, which is most likely a plain Javascript object and is **mutable** (Redux wants you to handle state immutably, which means return a new state instead of changing the old one).\n\n>***Take:*** It creates a command object that tells the middleware to wait for a specific action. The resulting behavior of the call Effect is the same as when the middleware suspends the generator until a ***promise*** resolves. In the take case, it'll suspend the generator until a matching action is dispatched\n\nBy working with Saga, we make the side effects to be ***declarative*** rather than ***imperative***.\n>***Declarative:*** describing what the program must accomplish, rather than describe how to accomplish it\n\n>***Imperative:*** consists of commands for the computer to perform, focuses on describing how a program operates\n\n<div style=\"text-align: justify\">In the case of take, the control is inverted. Instead of the actions being pushed to the handler tasks, the **Saga is pulling the action by itself**. An additional generator, known as ***watcher*** which contains ***take*** has to be created to watch a specific action and being triggered once the following action is dispatched in the application. There are two ways to create a watcher, one is using the buid-in functions (***Saga Helper***):</div>```javascript\nfunction* watchFetchData( ) {\n    yield takeEvery( \"FETCH_REQUEST\", callFetchDataApi );\n}\n```\n<div style=\"text-align: justify\">***takeEvery*** allows multiple request to be proceeding at the same time. Or if you just want the latest request to be fired (the older one will be overrided during each time the watcher is triggered):</div>```javascript\nfunction* watchFetchData( ) {\n    yield takeLatest( \"FETCH_REQUEST\", callFetchDataApi );\n}\n```\n<div style=\"text-align: justify\">However by using ***take***, it is possible to fully control an action observation process to build complex control flow:</div>```javascript\nfunction* watchFetchData( ) {\n    while(true) {\n        const action = yield take( \"FETCH_REQUEST\" );\n        console.log( action );\n        yield call( callFetchDataApi, action.payload );\n    }\n}\n```\n<div style=\"text-align: justify\">All right, now you have been exposed to everything you need to know before start trying redux saga on your own. Here is a short overall example that may also help:</div>\nStore:\n```javascript\nconst sagaMiddleware = createSagaMiddleware( );\nconst store = createStore( rootReducer, appluMiddleware(sagaMiddleware) );\nsagaMiddleware.run( watchFetch );\n```\nSagas:\n```javascript\nfunction* watchFetch( ): Generator<*, *, *> {\n    yield takeEvery( \"FETCH_ACTION\", callFetchAPI );\n}\n\nfunction* callFetchAPI( ): Generator<*, *, *> {\n    try {\n        yield put({ type: \"FETCHING\", payload: ... });\n        const data = yield call( actualCallApi );\n        yield put({ type: \"FETCH_SUCCESS\", payload: data });\n    } catch ( err ) {\n        yield put({ type: \"FETCH_FAILED\", payload: err });\n    }\n}\n```\nReducer:\n```javascript\nconst reducer = ( state = initState, action ) => {\n    switch( action ) {\n        case \"FETCHING\":\n            return { loading: true, ...state };\n        case \"FETCH_SUCCESS\":\n            return { loading: false, success: true, data: action.payload, ...state };\n        case \"FETCH_FAILED\":\n            return { loading: false, success: false, error: true, ...state };\n        default:\n            return { ...state };\n    }\n}\n```\nComponent:\n```javascript\nclass myComponent extends React.Component {\n    const mapStateToProps = ...\n    const mapDispatchToProps = ...\n    render( ) {\n        return (\n            <button onClick = { ( ) => this.props.dispatch({ type: \"FETCH_ACTION\" }) }/>\n            {\n                this.props.loading?\n                    <p>Loading..</p> : this.props.error?\n                        <p>Error!</p> : <p>{this.props.data}</p>\n            }\n        );\n    }\n}\nexport default connect( mapStateToProps, mapDispatchToProps )( myComponent );\n\n```\n<div style=\"text-align: justify\">For more advanced concepts, there is a well-organized [Saga offical documentation](https://redux-saga.js.org/docs/advanced/) you can refer to if you want to dive deeper.</div></br>\n## How to test Saga?\n<div style=\"text-align: justify\">A function that returns a simple object is easier to test than a function that directly makes an asynchronous call. For redux saga, each time you yield a function call will return a plain javascript object which makes the workflow much easier to test. You don’t need to use the real API, fake it, or mock it, instead just iterating over the generator function, asserting for equality on the values yielded.</div>```javascript\ndescribe( \"fetch work flow\", ( ) => {\n    const generator = cloneableGenerator( callFetchAPI )({ type: \"FETCH_ACTION\" });\n    expect( generator.next( ).value ).toEqual( put({ type: \"FETCHING\", payload: ... }) );\n\n    test( \"fetch success\", ( ) => {\n        const clone = generator.clone( );\n        expect( clone.next( ).value ).toEqual( put({ type: \"FETCH_SUCCESS\" }) );\n        expect( generator.next( ).done ).toEqual( true );\n    });\n});\n```\n<div style=\"text-align: justify\">In the above example, we use **clone( )** to test different control flows and **next( )** to iterate to the next function ready be yielded. The mock return value can also be injected as an argument of **next( )**:</div>```javascript\nexpect( clone.next( false ).value ).toEqual( put( fetchFailedAction( ) ) );\n```\n</br>\n## Saga vs Observables\n<div style=\"text-align: justify\">Redux saga is not the only solution to our apps which may have complex control flows, they are other helpful tools providing different trade-offs which can also resolve the async problems. Here are some good [code snippets](https://hackmd.io/s/H1xLHUQ8e) of saga vs observables that can open your mind :D</div>\n</br>\n</br>\n## References:\nhttps://redux-saga.js.org/\nhttps://stackoverflow.com/questions/25098066/what-is-callback-hell-and-how-and-why-rx-solves-it\nhttps://redux.js.org/advanced/middleware\nhttps://pub.dartlang.org/packages/redux_thunk\nhttps://codeburst.io/how-i-test-redux-saga-fcc425cda018\nhttps://engineering.universe.com/what-is-redux-saga-c1252fc2f4d1\nhttps://www.sitepoint.com/redux-without-react-state-management-vanilla-javascript/\nhttps://redux.js.org/introduction/getting-started\nhttps://blog.logrocket.com/understanding-redux-saga-from-action-creators-to-sagas-2587298b5e71\n","source":"_posts/A-Brief-Introduce-to-Redux-Saga.md","raw":"---\ntitle: A Brief Introduce to Redux Saga\ndate: 2019-04-28 14:35:50\ntags: [Redux, Saga, React]\nphotos: [\"../images/redux-saga.JPG\"]\n---\n<div style=\"text-align: justify\">\nIf you are quite experienced with redux, which is a predictable state container for JavaScript applications (**Note:** even thouth React and Redux is a popular combination to build fast and powerful apps, Redux is not necessarily combined with React), you are definitely feeling comfortable with its powerful store which manages all the global states and provides much cleaner logic flows to change them. If you are new to redux, [here](https://redux.js.org/introduction/getting-started) is the guide to dive before we start our topic.</div>\n\n<div style=\"text-align: justify\">\nIn a complex javascript application, asynchronous function is always one of the most annoying part where encounters tons of bugs. If not handle them properly, the app usually ends up with ***call back hell***.\n</div>\n\n## **Haven't heard of *CallBack Hell*?**\n<div style=\"text-align: justify\">Well, in javascript, the only way you can suspend a computation and have the rest operations doing later is to put the rest operations into a callback function. This callback function usually returns a ***Promise*** (And has a type of ***Promise<\\any>***). In order to easily mark those async functions, after ***ES6*** javascript provides extra modifiers ***async*** and ***await***, which actually wraps up the original utilities of promise and makes it more readable to programmers. Hummm, sounds like things are going better... ~~**NO!! It doesn't resolve anything!**~~ The core problem leads to a callback hell is the hierarchical async calls, for example</div>\n\nyou have some simple synchronous functions which are in a chain to accomplish some logics:\n```javascript\na = getSomething( );\nb = getMore(a);\nc = getMoreAndMore(b);\n...\n```\n<div style=\"text-align: justify\">It looks fine for now, but what if they all turn out to be async? Then you have to follow the callback style to make them operate one right after another is done:</div>```javascript\ngetSomthing( function( a ) {\n    getMore( a, function( b ) {\n        getMoreAndMore( b, function( c ) {\n            //keep going...\n        });\n    });\n});\n```\nOr you prefer ***ES6***:\n```javascript\nasync function getSomething( a ) {\n    await b = ToDo( a );\n    return await getMore( ( b ) => {\n        return await ToDo( b );\n    }).then( ( c ) => {\n        return await ToDo( c );\n    }).then(...);\n}\n```\nLooks really confused? This will getting even uglier if we are using callbacks in loops. \n</br>\n## Redux Thunks\n<div style=\"text-align: justify\">Back to our redux app, we usually want to update some states after an async call to inform the UI that the data is ready to be fetched. That is always achieved by dispatching an action from the component to the reducer:</div>```javascript\nasync const callAPI = ( ) => {\n    ...\n    return response;\n}\n...\nasync const updateUI = ( ...params ) => {\n    const res = await callAPI( );\n    if (res.status === 200)\n        dispatch( {type: \"UPDATE\", isSuccess: true} );\n}\n...\nrender ( ) {\n    ...\n    this.props.isSuccess?\n        showData( ) : showError( )\n}\n```\n<div style=\"text-align: justify\">This isn't bad, but we are always looking for something better. An advanced way to rewrite it is using redux middleware. ***Middleware*** is somewhere you can put the code after the framework receives a request and before it generates a response. For example, we want to add a logger in the redux store so that when the store catches an action, before it returns the new state, the logger can log the previous state and the new generated state. This is what can be added as a middleware:</div>```javascript\nfunction logger( store ) {\n    return function wrapDispatch ( next ) {\n        return function dispatchAndLog ( action ) {\n            console.log( \"dispatching.. \", action );\n            let result = next( action );\n            console.log( \"new state\", store.getState( ) );\n            return result;\n        }\n    }\n}\n```\n<div style=\"text-align: justify\">There are more advanced ways to add a logger. If you are interested, please refer to the [offical documentation](https://redux.js.org/advanced/middleware). With our middleware, the previous example can be written in a cleaner way:</div>```javascript\nconst callAPI = ( ) => {\n    return( ( dispatch ) => {\n        dispatch( startCallingApiAction );\n        actualCallApi( ).then( data => {\n            dispatch(successAction( data ));\n        }).fail( err => {\n            dispatch( failedAction(err) );\n        });\n    });\n}\n```\n<div style=\"text-align: justify\">The successful response data is wrapped in the payload of the action, sent to the reducer. Once the store updates the data, it will be mapped as a prop back to the component and request for a rerender. This middleware is also called ***thunk***. By applying thunk to decouple the presentation layer, we can get rid of most of the side effects in components, instead, managing and orchestrating side effects in thunks.</div>\n<div style=\"text-align: justify\">This is great, so why are we even considering ***saga***? Well, one of the advantages of middleware is that it can be chained. Every middleware mounted in redux store starts an individual thread (or something really looks like a thread in ***NodeJS***). When a middleware captures an action and handles its side effect, it can dispatch a new action to another middleware to do nested logics. This behavior of middleware indicates that thunks can be chained as well, for example thunkA forwards its return payload to thunkB and thunkB forwards its return payload to... **Wait! That sounds quite familiar!! Is that the case of callback hell??** Unfortunately, a good thing plus another good feature doesn't always end up with something better. ~~It could be some shit as well (笑)~~ In this case, true, this is exactly the callback hell.</div></br>\n## Redux Saga\n<div style=\"text-align: justify\">To handle the possible endless callback functions and also to make it more easily to test in a component which has complicated logics, we need to change our previous thoughts. Just like shifting from Process Oriented Programming to Object Oriented Programming, instead of telling the application how to handle the side effects, suppose it already knows how to call a function and how to dispatch an action, all we need to do is to **give instructions about what to do next** and we don't care about how those instructions will be executed (Saga handles the executions).</div>\nThen the thunks example can be changed as following:\n```javascript\nexport function* apiSideEffect( action ) {\n    try{\n        const data = yield call( actualCallApi );\n        yield put({ type: \"SUCCESS\", payload: data });\n    } catch ( err ) {\n        yield put({ type: \"FAILED\", payload: err });\n    }\n}\n\nexport function* apiSaga( ) {\n    yield takeEvery( \"CLICK_TO_CALL_API\", apiSideEffect );\n}\n```\nThere are serval fucntions already being integrated in Saga:\n>***Call:*** the method call will return only a plain object describing the operation so redux-saga can take care of the invocation and returns the result to the generator. The first parameter is the generator function ready to be called and the rest params are all the arguments in the generator.\n\n>***Put:*** Instead of dispatching an action inside the generator (Don't ever ever do that), ***put*** Returns an object with instructions for the middleware to dispatch the action.\n\n>***Select:*** Returns value from the selector function, similar with **getState( )**. ***Note:*** It is not recommended to use this function because it returns the value corresponding to the contents of the store state tree, which is most likely a plain Javascript object and is **mutable** (Redux wants you to handle state immutably, which means return a new state instead of changing the old one).\n\n>***Take:*** It creates a command object that tells the middleware to wait for a specific action. The resulting behavior of the call Effect is the same as when the middleware suspends the generator until a ***promise*** resolves. In the take case, it'll suspend the generator until a matching action is dispatched\n\nBy working with Saga, we make the side effects to be ***declarative*** rather than ***imperative***.\n>***Declarative:*** describing what the program must accomplish, rather than describe how to accomplish it\n\n>***Imperative:*** consists of commands for the computer to perform, focuses on describing how a program operates\n\n<div style=\"text-align: justify\">In the case of take, the control is inverted. Instead of the actions being pushed to the handler tasks, the **Saga is pulling the action by itself**. An additional generator, known as ***watcher*** which contains ***take*** has to be created to watch a specific action and being triggered once the following action is dispatched in the application. There are two ways to create a watcher, one is using the buid-in functions (***Saga Helper***):</div>```javascript\nfunction* watchFetchData( ) {\n    yield takeEvery( \"FETCH_REQUEST\", callFetchDataApi );\n}\n```\n<div style=\"text-align: justify\">***takeEvery*** allows multiple request to be proceeding at the same time. Or if you just want the latest request to be fired (the older one will be overrided during each time the watcher is triggered):</div>```javascript\nfunction* watchFetchData( ) {\n    yield takeLatest( \"FETCH_REQUEST\", callFetchDataApi );\n}\n```\n<div style=\"text-align: justify\">However by using ***take***, it is possible to fully control an action observation process to build complex control flow:</div>```javascript\nfunction* watchFetchData( ) {\n    while(true) {\n        const action = yield take( \"FETCH_REQUEST\" );\n        console.log( action );\n        yield call( callFetchDataApi, action.payload );\n    }\n}\n```\n<div style=\"text-align: justify\">All right, now you have been exposed to everything you need to know before start trying redux saga on your own. Here is a short overall example that may also help:</div>\nStore:\n```javascript\nconst sagaMiddleware = createSagaMiddleware( );\nconst store = createStore( rootReducer, appluMiddleware(sagaMiddleware) );\nsagaMiddleware.run( watchFetch );\n```\nSagas:\n```javascript\nfunction* watchFetch( ): Generator<*, *, *> {\n    yield takeEvery( \"FETCH_ACTION\", callFetchAPI );\n}\n\nfunction* callFetchAPI( ): Generator<*, *, *> {\n    try {\n        yield put({ type: \"FETCHING\", payload: ... });\n        const data = yield call( actualCallApi );\n        yield put({ type: \"FETCH_SUCCESS\", payload: data });\n    } catch ( err ) {\n        yield put({ type: \"FETCH_FAILED\", payload: err });\n    }\n}\n```\nReducer:\n```javascript\nconst reducer = ( state = initState, action ) => {\n    switch( action ) {\n        case \"FETCHING\":\n            return { loading: true, ...state };\n        case \"FETCH_SUCCESS\":\n            return { loading: false, success: true, data: action.payload, ...state };\n        case \"FETCH_FAILED\":\n            return { loading: false, success: false, error: true, ...state };\n        default:\n            return { ...state };\n    }\n}\n```\nComponent:\n```javascript\nclass myComponent extends React.Component {\n    const mapStateToProps = ...\n    const mapDispatchToProps = ...\n    render( ) {\n        return (\n            <button onClick = { ( ) => this.props.dispatch({ type: \"FETCH_ACTION\" }) }/>\n            {\n                this.props.loading?\n                    <p>Loading..</p> : this.props.error?\n                        <p>Error!</p> : <p>{this.props.data}</p>\n            }\n        );\n    }\n}\nexport default connect( mapStateToProps, mapDispatchToProps )( myComponent );\n\n```\n<div style=\"text-align: justify\">For more advanced concepts, there is a well-organized [Saga offical documentation](https://redux-saga.js.org/docs/advanced/) you can refer to if you want to dive deeper.</div></br>\n## How to test Saga?\n<div style=\"text-align: justify\">A function that returns a simple object is easier to test than a function that directly makes an asynchronous call. For redux saga, each time you yield a function call will return a plain javascript object which makes the workflow much easier to test. You don’t need to use the real API, fake it, or mock it, instead just iterating over the generator function, asserting for equality on the values yielded.</div>```javascript\ndescribe( \"fetch work flow\", ( ) => {\n    const generator = cloneableGenerator( callFetchAPI )({ type: \"FETCH_ACTION\" });\n    expect( generator.next( ).value ).toEqual( put({ type: \"FETCHING\", payload: ... }) );\n\n    test( \"fetch success\", ( ) => {\n        const clone = generator.clone( );\n        expect( clone.next( ).value ).toEqual( put({ type: \"FETCH_SUCCESS\" }) );\n        expect( generator.next( ).done ).toEqual( true );\n    });\n});\n```\n<div style=\"text-align: justify\">In the above example, we use **clone( )** to test different control flows and **next( )** to iterate to the next function ready be yielded. The mock return value can also be injected as an argument of **next( )**:</div>```javascript\nexpect( clone.next( false ).value ).toEqual( put( fetchFailedAction( ) ) );\n```\n</br>\n## Saga vs Observables\n<div style=\"text-align: justify\">Redux saga is not the only solution to our apps which may have complex control flows, they are other helpful tools providing different trade-offs which can also resolve the async problems. Here are some good [code snippets](https://hackmd.io/s/H1xLHUQ8e) of saga vs observables that can open your mind :D</div>\n</br>\n</br>\n## References:\nhttps://redux-saga.js.org/\nhttps://stackoverflow.com/questions/25098066/what-is-callback-hell-and-how-and-why-rx-solves-it\nhttps://redux.js.org/advanced/middleware\nhttps://pub.dartlang.org/packages/redux_thunk\nhttps://codeburst.io/how-i-test-redux-saga-fcc425cda018\nhttps://engineering.universe.com/what-is-redux-saga-c1252fc2f4d1\nhttps://www.sitepoint.com/redux-without-react-state-management-vanilla-javascript/\nhttps://redux.js.org/introduction/getting-started\nhttps://blog.logrocket.com/understanding-redux-saga-from-action-creators-to-sagas-2587298b5e71\n","slug":"A-Brief-Introduce-to-Redux-Saga","published":1,"updated":"2019-04-29T06:57:43.253Z","_id":"cjv0i6e1w0000fhao6asketh7","comments":1,"layout":"post","link":"","content":"<div style=\"text-align: justify\"><br>If you are quite experienced with redux, which is a predictable state container for JavaScript applications (<strong>Note:</strong> even thouth React and Redux is a popular combination to build fast and powerful apps, Redux is not necessarily combined with React), you are definitely feeling comfortable with its powerful store which manages all the global states and provides much cleaner logic flows to change them. If you are new to redux, <a href=\"https://redux.js.org/introduction/getting-started\" target=\"_blank\" rel=\"noopener\">here</a> is the guide to dive before we start our topic.</div>\n\n<div style=\"text-align: justify\"><br>In a complex javascript application, asynchronous function is always one of the most annoying part where encounters tons of bugs. If not handle them properly, the app usually ends up with <strong><em>call back hell</em></strong>.<br></div>\n\n<h2 id=\"Haven’t-heard-of-CallBack-Hell\"><a href=\"#Haven’t-heard-of-CallBack-Hell\" class=\"headerlink\" title=\"Haven’t heard of CallBack Hell?\"></a><strong>Haven’t heard of <em>CallBack Hell</em>?</strong></h2><div style=\"text-align: justify\">Well, in javascript, the only way you can suspend a computation and have the rest operations doing later is to put the rest operations into a callback function. This callback function usually returns a <strong><em>Promise</em></strong> (And has a type of <strong><em>Promise&lt;\\any&gt;</em></strong>). In order to easily mark those async functions, after <strong><em>ES6</em></strong> javascript provides extra modifiers <strong><em>async</em></strong> and <strong><em>await</em></strong>, which actually wraps up the original utilities of promise and makes it more readable to programmers. Hummm, sounds like things are going better… <del><strong>NO!! It doesn’t resolve anything!</strong></del> The core problem leads to a callback hell is the hierarchical async calls, for example</div>\n\n<p>you have some simple synchronous functions which are in a chain to accomplish some logics:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = getSomething( );</span><br><span class=\"line\">b = getMore(a);</span><br><span class=\"line\">c = getMoreAndMore(b);</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">It looks fine for now, but what if they all turn out to be async? Then you have to follow the callback style to make them operate one right after another is done:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getSomthing( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> a </span>) </span>&#123;</span><br><span class=\"line\">    getMore( a, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> b </span>) </span>&#123;</span><br><span class=\"line\">        getMoreAndMore( b, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> c </span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//keep going...</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>Or you prefer <strong><em>ES6</em></strong>:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSomething</span>(<span class=\"params\"> a </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> b = ToDo( a );</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> getMore( <span class=\"function\">(<span class=\"params\"> b </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> ToDo( b );</span><br><span class=\"line\">    &#125;).then( <span class=\"function\">(<span class=\"params\"> c </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> ToDo( c );</span><br><span class=\"line\">    &#125;).then(...);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Looks really confused? This will getting even uglier if we are using callbacks in loops.<br><br></p>\n<h2 id=\"Redux-Thunks\"><a href=\"#Redux-Thunks\" class=\"headerlink\" title=\"Redux Thunks\"></a>Redux Thunks</h2><p><div style=\"text-align: justify\">Back to our redux app, we usually want to update some states after an async call to inform the UI that the data is ready to be fetched. That is always achieved by dispatching an action from the component to the reducer:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">const</span> callAPI = <span class=\"function\"><span class=\"params\">( )</span> =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">const</span> updateUI = <span class=\"function\">(<span class=\"params\"> ...params </span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> res = <span class=\"keyword\">await</span> callAPI( );</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (res.status === <span class=\"number\">200</span>)</span><br><span class=\"line\">        dispatch( &#123;<span class=\"attr\">type</span>: <span class=\"string\">\"UPDATE\"</span>, <span class=\"attr\">isSuccess</span>: <span class=\"literal\">true</span>&#125; );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\">render ( ) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.isSuccess?</span><br><span class=\"line\">        showData( ) : showError( )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">This isn’t bad, but we are always looking for something better. An advanced way to rewrite it is using redux middleware. <strong><em>Middleware</em></strong> is somewhere you can put the code after the framework receives a request and before it generates a response. For example, we want to add a logger in the redux store so that when the store catches an action, before it returns the new state, the logger can log the previous state and the new generated state. This is what can be added as a middleware:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">logger</span>(<span class=\"params\"> store </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wrapDispatch</span> (<span class=\"params\"> next </span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatchAndLog</span> (<span class=\"params\"> action </span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log( <span class=\"string\">\"dispatching.. \"</span>, action );</span><br><span class=\"line\">            <span class=\"keyword\">let</span> result = next( action );</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log( <span class=\"string\">\"new state\"</span>, store.getState( ) );</span><br><span class=\"line\">            <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">There are more advanced ways to add a logger. If you are interested, please refer to the <a href=\"https://redux.js.org/advanced/middleware\" target=\"_blank\" rel=\"noopener\">offical documentation</a>. With our middleware, the previous example can be written in a cleaner way:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> callAPI = <span class=\"function\"><span class=\"params\">( )</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span><span class=\"function\">(<span class=\"params\"> ( dispatch </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        dispatch( startCallingApiAction );</span><br><span class=\"line\">        actualCallApi( ).then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">            dispatch(successAction( data ));</span><br><span class=\"line\">        &#125;).fail( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">            dispatch( failedAction(err) );</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">The successful response data is wrapped in the payload of the action, sent to the reducer. Once the store updates the data, it will be mapped as a prop back to the component and request for a rerender. This middleware is also called <strong><em>thunk</em></strong>. By applying thunk to decouple the presentation layer, we can get rid of most of the side effects in components, instead, managing and orchestrating side effects in thunks.</div></p>\n<p><div style=\"text-align: justify\">This is great, so why are we even considering <strong><em>saga</em></strong>? Well, one of the advantages of middleware is that it can be chained. Every middleware mounted in redux store starts an individual thread (or something really looks like a thread in <strong><em>NodeJS</em></strong>). When a middleware captures an action and handles its side effect, it can dispatch a new action to another middleware to do nested logics. This behavior of middleware indicates that thunks can be chained as well, for example thunkA forwards its return payload to thunkB and thunkB forwards its return payload to… <strong>Wait! That sounds quite familiar!! Is that the case of callback hell??</strong> Unfortunately, a good thing plus another good feature doesn’t always end up with something better. <del>It could be some shit as well (笑)</del> In this case, true, this is exactly the callback hell.</div><br></p>\n<h2 id=\"Redux-Saga\"><a href=\"#Redux-Saga\" class=\"headerlink\" title=\"Redux Saga\"></a>Redux Saga</h2><p><div style=\"text-align: justify\">To handle the possible endless callback functions and also to make it more easily to test in a component which has complicated logics, we need to change our previous thoughts. Just like shifting from Process Oriented Programming to Object Oriented Programming, instead of telling the application how to handle the side effects, suppose it already knows how to call a function and how to dispatch an action, all we need to do is to <strong>give instructions about what to do next</strong> and we don’t care about how those instructions will be executed (Saga handles the executions).</div><br>Then the thunks example can be changed as following:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">apiSideEffect</span>(<span class=\"params\"> action </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> call( actualCallApi );</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"SUCCESS\"</span>, <span class=\"attr\">payload</span>: data &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> ( err ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FAILED\"</span>, <span class=\"attr\">payload</span>: err &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">apiSaga</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeEvery( <span class=\"string\">\"CLICK_TO_CALL_API\"</span>, apiSideEffect );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>There are serval fucntions already being integrated in Saga:</p>\n<blockquote>\n<p><strong><em>Call:</em></strong> the method call will return only a plain object describing the operation so redux-saga can take care of the invocation and returns the result to the generator. The first parameter is the generator function ready to be called and the rest params are all the arguments in the generator.</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Put:</em></strong> Instead of dispatching an action inside the generator (Don’t ever ever do that), <strong><em>put</em></strong> Returns an object with instructions for the middleware to dispatch the action.</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Select:</em></strong> Returns value from the selector function, similar with <strong>getState( )</strong>. <strong><em>Note:</em></strong> It is not recommended to use this function because it returns the value corresponding to the contents of the store state tree, which is most likely a plain Javascript object and is <strong>mutable</strong> (Redux wants you to handle state immutably, which means return a new state instead of changing the old one).</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Take:</em></strong> It creates a command object that tells the middleware to wait for a specific action. The resulting behavior of the call Effect is the same as when the middleware suspends the generator until a <strong><em>promise</em></strong> resolves. In the take case, it’ll suspend the generator until a matching action is dispatched</p>\n</blockquote>\n<p>By working with Saga, we make the side effects to be <strong><em>declarative</em></strong> rather than <strong><em>imperative</em></strong>.</p>\n<blockquote>\n<p><strong><em>Declarative:</em></strong> describing what the program must accomplish, rather than describe how to accomplish it</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Imperative:</em></strong> consists of commands for the computer to perform, focuses on describing how a program operates</p>\n</blockquote>\n<p><div style=\"text-align: justify\">In the case of take, the control is inverted. Instead of the actions being pushed to the handler tasks, the <strong>Saga is pulling the action by itself</strong>. An additional generator, known as <strong><em>watcher</em></strong> which contains <strong><em>take</em></strong> has to be created to watch a specific action and being triggered once the following action is dispatched in the application. There are two ways to create a watcher, one is using the buid-in functions (<strong><em>Saga Helper</em></strong>):</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetchData</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeEvery( <span class=\"string\">\"FETCH_REQUEST\"</span>, callFetchDataApi );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\"><strong><em>takeEvery</em></strong> allows multiple request to be proceeding at the same time. Or if you just want the latest request to be fired (the older one will be overrided during each time the watcher is triggered):</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetchData</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeLatest( <span class=\"string\">\"FETCH_REQUEST\"</span>, callFetchDataApi );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">However by using <strong><em>take</em></strong>, it is possible to fully control an action observation process to build complex control flow:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetchData</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> action = <span class=\"keyword\">yield</span> take( <span class=\"string\">\"FETCH_REQUEST\"</span> );</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log( action );</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> call( callFetchDataApi, action.payload );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">All right, now you have been exposed to everything you need to know before start trying redux saga on your own. Here is a short overall example that may also help:</div><br>Store:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> sagaMiddleware = createSagaMiddleware( );</span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore( rootReducer, appluMiddleware(sagaMiddleware) );</span><br><span class=\"line\">sagaMiddleware.run( watchFetch );</span><br></pre></td></tr></table></figure></p>\n<p>Sagas:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetch</span>(<span class=\"params\"> </span>): <span class=\"title\">Generator</span>&lt;*, *, *&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeEvery( <span class=\"string\">\"FETCH_ACTION\"</span>, callFetchAPI );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">callFetchAPI</span>(<span class=\"params\"> </span>): <span class=\"title\">Generator</span>&lt;*, *, *&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCHING\"</span>, <span class=\"attr\">payload</span>: ... &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> call( actualCallApi );</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_SUCCESS\"</span>, <span class=\"attr\">payload</span>: data &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> ( err ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_FAILED\"</span>, <span class=\"attr\">payload</span>: err &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Reducer:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reducer = <span class=\"function\">(<span class=\"params\"> state = initState, action </span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>( action ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">\"FETCHING\"</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; <span class=\"attr\">loading</span>: <span class=\"literal\">true</span>, ...state &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">\"FETCH_SUCCESS\"</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>, <span class=\"attr\">success</span>: <span class=\"literal\">true</span>, <span class=\"attr\">data</span>: action.payload, ...state &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">\"FETCH_FAILED\"</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>, <span class=\"attr\">success</span>: <span class=\"literal\">false</span>, <span class=\"attr\">error</span>: <span class=\"literal\">true</span>, ...state &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; ...state &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Component:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> mapStateToProps = ...</span><br><span class=\"line\">    <span class=\"keyword\">const</span> mapDispatchToProps = ...</span><br><span class=\"line\">    render( ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (</span><br><span class=\"line\">            &lt;button onClick = &#123; ( ) =&gt; <span class=\"keyword\">this</span>.props.dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_ACTION\"</span> &#125;) &#125;/&gt;</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.props.loading?</span><br><span class=\"line\">                    &lt;p&gt;Loading..&lt;<span class=\"regexp\">/p&gt; : this.props.error?</span></span><br><span class=\"line\"><span class=\"regexp\">                        &lt;p&gt;Error!&lt;/</span>p&gt; : &lt;p&gt;&#123;this.props.data&#125;&lt;/p&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect( mapStateToProps, mapDispatchToProps )( myComponent );</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">For more advanced concepts, there is a well-organized <a href=\"https://redux-saga.js.org/docs/advanced/\" target=\"_blank\" rel=\"noopener\">Saga offical documentation</a> you can refer to if you want to dive deeper.</div><br></p>\n<h2 id=\"How-to-test-Saga\"><a href=\"#How-to-test-Saga\" class=\"headerlink\" title=\"How to test Saga?\"></a>How to test Saga?</h2><p><div style=\"text-align: justify\">A function that returns a simple object is easier to test than a function that directly makes an asynchronous call. For redux saga, each time you yield a function call will return a plain javascript object which makes the workflow much easier to test. You don’t need to use the real API, fake it, or mock it, instead just iterating over the generator function, asserting for equality on the values yielded.</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">describe( <span class=\"string\">\"fetch work flow\"</span>, ( ) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> generator = cloneableGenerator( callFetchAPI )(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_ACTION\"</span> &#125;);</span><br><span class=\"line\">    expect( generator.next( ).value ).toEqual( put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCHING\"</span>, <span class=\"attr\">payload</span>: ... &#125;) );</span><br><span class=\"line\"></span><br><span class=\"line\">    test( <span class=\"string\">\"fetch success\"</span>, ( ) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> clone = generator.clone( );</span><br><span class=\"line\">        expect( clone.next( ).value ).toEqual( put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_SUCCESS\"</span> &#125;) );</span><br><span class=\"line\">        expect( generator.next( ).done ).toEqual( <span class=\"literal\">true</span> );</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">In the above example, we use <strong>clone( )</strong> to test different control flows and <strong>next( )</strong> to iterate to the next function ready be yielded. The mock return value can also be injected as an argument of <strong>next( )</strong>:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">expect( clone.next( <span class=\"literal\">false</span> ).value ).toEqual( put( fetchFailedAction( ) ) );</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h2 id=\"Saga-vs-Observables\"><a href=\"#Saga-vs-Observables\" class=\"headerlink\" title=\"Saga vs Observables\"></a>Saga vs Observables</h2><p><div style=\"text-align: justify\">Redux saga is not the only solution to our apps which may have complex control flows, they are other helpful tools providing different trade-offs which can also resolve the async problems. Here are some good <a href=\"https://hackmd.io/s/H1xLHUQ8e\" target=\"_blank\" rel=\"noopener\">code snippets</a> of saga vs observables that can open your mind :D</div><br><br><br><br></p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References:\"></a>References:</h2><p><a href=\"https://redux-saga.js.org/\" target=\"_blank\" rel=\"noopener\">https://redux-saga.js.org/</a><br><a href=\"https://stackoverflow.com/questions/25098066/what-is-callback-hell-and-how-and-why-rx-solves-it\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/25098066/what-is-callback-hell-and-how-and-why-rx-solves-it</a><br><a href=\"https://redux.js.org/advanced/middleware\" target=\"_blank\" rel=\"noopener\">https://redux.js.org/advanced/middleware</a><br><a href=\"https://pub.dartlang.org/packages/redux_thunk\" target=\"_blank\" rel=\"noopener\">https://pub.dartlang.org/packages/redux_thunk</a><br><a href=\"https://codeburst.io/how-i-test-redux-saga-fcc425cda018\" target=\"_blank\" rel=\"noopener\">https://codeburst.io/how-i-test-redux-saga-fcc425cda018</a><br><a href=\"https://engineering.universe.com/what-is-redux-saga-c1252fc2f4d1\" target=\"_blank\" rel=\"noopener\">https://engineering.universe.com/what-is-redux-saga-c1252fc2f4d1</a><br><a href=\"https://www.sitepoint.com/redux-without-react-state-management-vanilla-javascript/\" target=\"_blank\" rel=\"noopener\">https://www.sitepoint.com/redux-without-react-state-management-vanilla-javascript/</a><br><a href=\"https://redux.js.org/introduction/getting-started\" target=\"_blank\" rel=\"noopener\">https://redux.js.org/introduction/getting-started</a><br><a href=\"https://blog.logrocket.com/understanding-redux-saga-from-action-creators-to-sagas-2587298b5e71\" target=\"_blank\" rel=\"noopener\">https://blog.logrocket.com/understanding-redux-saga-from-action-creators-to-sagas-2587298b5e71</a></p>\n","site":{"data":{}},"excerpt":"","more":"<div style=\"text-align: justify\"><br>If you are quite experienced with redux, which is a predictable state container for JavaScript applications (<strong>Note:</strong> even thouth React and Redux is a popular combination to build fast and powerful apps, Redux is not necessarily combined with React), you are definitely feeling comfortable with its powerful store which manages all the global states and provides much cleaner logic flows to change them. If you are new to redux, <a href=\"https://redux.js.org/introduction/getting-started\" target=\"_blank\" rel=\"noopener\">here</a> is the guide to dive before we start our topic.</div>\n\n<div style=\"text-align: justify\"><br>In a complex javascript application, asynchronous function is always one of the most annoying part where encounters tons of bugs. If not handle them properly, the app usually ends up with <strong><em>call back hell</em></strong>.<br></div>\n\n<h2 id=\"Haven’t-heard-of-CallBack-Hell\"><a href=\"#Haven’t-heard-of-CallBack-Hell\" class=\"headerlink\" title=\"Haven’t heard of CallBack Hell?\"></a><strong>Haven’t heard of <em>CallBack Hell</em>?</strong></h2><div style=\"text-align: justify\">Well, in javascript, the only way you can suspend a computation and have the rest operations doing later is to put the rest operations into a callback function. This callback function usually returns a <strong><em>Promise</em></strong> (And has a type of <strong><em>Promise&lt;\\any&gt;</em></strong>). In order to easily mark those async functions, after <strong><em>ES6</em></strong> javascript provides extra modifiers <strong><em>async</em></strong> and <strong><em>await</em></strong>, which actually wraps up the original utilities of promise and makes it more readable to programmers. Hummm, sounds like things are going better… <del><strong>NO!! It doesn’t resolve anything!</strong></del> The core problem leads to a callback hell is the hierarchical async calls, for example</div>\n\n<p>you have some simple synchronous functions which are in a chain to accomplish some logics:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = getSomething( );</span><br><span class=\"line\">b = getMore(a);</span><br><span class=\"line\">c = getMoreAndMore(b);</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">It looks fine for now, but what if they all turn out to be async? Then you have to follow the callback style to make them operate one right after another is done:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getSomthing( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> a </span>) </span>&#123;</span><br><span class=\"line\">    getMore( a, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> b </span>) </span>&#123;</span><br><span class=\"line\">        getMoreAndMore( b, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> c </span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//keep going...</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>Or you prefer <strong><em>ES6</em></strong>:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSomething</span>(<span class=\"params\"> a </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> b = ToDo( a );</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> getMore( <span class=\"function\">(<span class=\"params\"> b </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> ToDo( b );</span><br><span class=\"line\">    &#125;).then( <span class=\"function\">(<span class=\"params\"> c </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> ToDo( c );</span><br><span class=\"line\">    &#125;).then(...);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Looks really confused? This will getting even uglier if we are using callbacks in loops.<br><br></p>\n<h2 id=\"Redux-Thunks\"><a href=\"#Redux-Thunks\" class=\"headerlink\" title=\"Redux Thunks\"></a>Redux Thunks</h2><p><div style=\"text-align: justify\">Back to our redux app, we usually want to update some states after an async call to inform the UI that the data is ready to be fetched. That is always achieved by dispatching an action from the component to the reducer:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">const</span> callAPI = <span class=\"function\"><span class=\"params\">( )</span> =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">const</span> updateUI = <span class=\"function\">(<span class=\"params\"> ...params </span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> res = <span class=\"keyword\">await</span> callAPI( );</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (res.status === <span class=\"number\">200</span>)</span><br><span class=\"line\">        dispatch( &#123;<span class=\"attr\">type</span>: <span class=\"string\">\"UPDATE\"</span>, <span class=\"attr\">isSuccess</span>: <span class=\"literal\">true</span>&#125; );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">...</span><br><span class=\"line\">render ( ) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.props.isSuccess?</span><br><span class=\"line\">        showData( ) : showError( )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">This isn’t bad, but we are always looking for something better. An advanced way to rewrite it is using redux middleware. <strong><em>Middleware</em></strong> is somewhere you can put the code after the framework receives a request and before it generates a response. For example, we want to add a logger in the redux store so that when the store catches an action, before it returns the new state, the logger can log the previous state and the new generated state. This is what can be added as a middleware:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">logger</span>(<span class=\"params\"> store </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wrapDispatch</span> (<span class=\"params\"> next </span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatchAndLog</span> (<span class=\"params\"> action </span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log( <span class=\"string\">\"dispatching.. \"</span>, action );</span><br><span class=\"line\">            <span class=\"keyword\">let</span> result = next( action );</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log( <span class=\"string\">\"new state\"</span>, store.getState( ) );</span><br><span class=\"line\">            <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">There are more advanced ways to add a logger. If you are interested, please refer to the <a href=\"https://redux.js.org/advanced/middleware\" target=\"_blank\" rel=\"noopener\">offical documentation</a>. With our middleware, the previous example can be written in a cleaner way:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> callAPI = <span class=\"function\"><span class=\"params\">( )</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span><span class=\"function\">(<span class=\"params\"> ( dispatch </span>) =&gt;</span> &#123;</span><br><span class=\"line\">        dispatch( startCallingApiAction );</span><br><span class=\"line\">        actualCallApi( ).then( <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">            dispatch(successAction( data ));</span><br><span class=\"line\">        &#125;).fail( <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">            dispatch( failedAction(err) );</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">The successful response data is wrapped in the payload of the action, sent to the reducer. Once the store updates the data, it will be mapped as a prop back to the component and request for a rerender. This middleware is also called <strong><em>thunk</em></strong>. By applying thunk to decouple the presentation layer, we can get rid of most of the side effects in components, instead, managing and orchestrating side effects in thunks.</div></p>\n<p><div style=\"text-align: justify\">This is great, so why are we even considering <strong><em>saga</em></strong>? Well, one of the advantages of middleware is that it can be chained. Every middleware mounted in redux store starts an individual thread (or something really looks like a thread in <strong><em>NodeJS</em></strong>). When a middleware captures an action and handles its side effect, it can dispatch a new action to another middleware to do nested logics. This behavior of middleware indicates that thunks can be chained as well, for example thunkA forwards its return payload to thunkB and thunkB forwards its return payload to… <strong>Wait! That sounds quite familiar!! Is that the case of callback hell??</strong> Unfortunately, a good thing plus another good feature doesn’t always end up with something better. <del>It could be some shit as well (笑)</del> In this case, true, this is exactly the callback hell.</div><br></p>\n<h2 id=\"Redux-Saga\"><a href=\"#Redux-Saga\" class=\"headerlink\" title=\"Redux Saga\"></a>Redux Saga</h2><p><div style=\"text-align: justify\">To handle the possible endless callback functions and also to make it more easily to test in a component which has complicated logics, we need to change our previous thoughts. Just like shifting from Process Oriented Programming to Object Oriented Programming, instead of telling the application how to handle the side effects, suppose it already knows how to call a function and how to dispatch an action, all we need to do is to <strong>give instructions about what to do next</strong> and we don’t care about how those instructions will be executed (Saga handles the executions).</div><br>Then the thunks example can be changed as following:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">apiSideEffect</span>(<span class=\"params\"> action </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> call( actualCallApi );</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"SUCCESS\"</span>, <span class=\"attr\">payload</span>: data &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> ( err ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FAILED\"</span>, <span class=\"attr\">payload</span>: err &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">apiSaga</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeEvery( <span class=\"string\">\"CLICK_TO_CALL_API\"</span>, apiSideEffect );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>There are serval fucntions already being integrated in Saga:</p>\n<blockquote>\n<p><strong><em>Call:</em></strong> the method call will return only a plain object describing the operation so redux-saga can take care of the invocation and returns the result to the generator. The first parameter is the generator function ready to be called and the rest params are all the arguments in the generator.</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Put:</em></strong> Instead of dispatching an action inside the generator (Don’t ever ever do that), <strong><em>put</em></strong> Returns an object with instructions for the middleware to dispatch the action.</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Select:</em></strong> Returns value from the selector function, similar with <strong>getState( )</strong>. <strong><em>Note:</em></strong> It is not recommended to use this function because it returns the value corresponding to the contents of the store state tree, which is most likely a plain Javascript object and is <strong>mutable</strong> (Redux wants you to handle state immutably, which means return a new state instead of changing the old one).</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Take:</em></strong> It creates a command object that tells the middleware to wait for a specific action. The resulting behavior of the call Effect is the same as when the middleware suspends the generator until a <strong><em>promise</em></strong> resolves. In the take case, it’ll suspend the generator until a matching action is dispatched</p>\n</blockquote>\n<p>By working with Saga, we make the side effects to be <strong><em>declarative</em></strong> rather than <strong><em>imperative</em></strong>.</p>\n<blockquote>\n<p><strong><em>Declarative:</em></strong> describing what the program must accomplish, rather than describe how to accomplish it</p>\n</blockquote>\n<blockquote>\n<p><strong><em>Imperative:</em></strong> consists of commands for the computer to perform, focuses on describing how a program operates</p>\n</blockquote>\n<p><div style=\"text-align: justify\">In the case of take, the control is inverted. Instead of the actions being pushed to the handler tasks, the <strong>Saga is pulling the action by itself</strong>. An additional generator, known as <strong><em>watcher</em></strong> which contains <strong><em>take</em></strong> has to be created to watch a specific action and being triggered once the following action is dispatched in the application. There are two ways to create a watcher, one is using the buid-in functions (<strong><em>Saga Helper</em></strong>):</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetchData</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeEvery( <span class=\"string\">\"FETCH_REQUEST\"</span>, callFetchDataApi );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\"><strong><em>takeEvery</em></strong> allows multiple request to be proceeding at the same time. Or if you just want the latest request to be fired (the older one will be overrided during each time the watcher is triggered):</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetchData</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeLatest( <span class=\"string\">\"FETCH_REQUEST\"</span>, callFetchDataApi );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">However by using <strong><em>take</em></strong>, it is possible to fully control an action observation process to build complex control flow:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetchData</span>(<span class=\"params\"> </span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> action = <span class=\"keyword\">yield</span> take( <span class=\"string\">\"FETCH_REQUEST\"</span> );</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log( action );</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> call( callFetchDataApi, action.payload );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">All right, now you have been exposed to everything you need to know before start trying redux saga on your own. Here is a short overall example that may also help:</div><br>Store:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> sagaMiddleware = createSagaMiddleware( );</span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore( rootReducer, appluMiddleware(sagaMiddleware) );</span><br><span class=\"line\">sagaMiddleware.run( watchFetch );</span><br></pre></td></tr></table></figure></p>\n<p>Sagas:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchFetch</span>(<span class=\"params\"> </span>): <span class=\"title\">Generator</span>&lt;*, *, *&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> takeEvery( <span class=\"string\">\"FETCH_ACTION\"</span>, callFetchAPI );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">callFetchAPI</span>(<span class=\"params\"> </span>): <span class=\"title\">Generator</span>&lt;*, *, *&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCHING\"</span>, <span class=\"attr\">payload</span>: ... &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> data = <span class=\"keyword\">yield</span> call( actualCallApi );</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_SUCCESS\"</span>, <span class=\"attr\">payload</span>: data &#125;);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> ( err ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_FAILED\"</span>, <span class=\"attr\">payload</span>: err &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Reducer:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reducer = <span class=\"function\">(<span class=\"params\"> state = initState, action </span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>( action ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">\"FETCHING\"</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; <span class=\"attr\">loading</span>: <span class=\"literal\">true</span>, ...state &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">\"FETCH_SUCCESS\"</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>, <span class=\"attr\">success</span>: <span class=\"literal\">true</span>, <span class=\"attr\">data</span>: action.payload, ...state &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">\"FETCH_FAILED\"</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>, <span class=\"attr\">success</span>: <span class=\"literal\">false</span>, <span class=\"attr\">error</span>: <span class=\"literal\">true</span>, ...state &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123; ...state &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>Component:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> mapStateToProps = ...</span><br><span class=\"line\">    <span class=\"keyword\">const</span> mapDispatchToProps = ...</span><br><span class=\"line\">    render( ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (</span><br><span class=\"line\">            &lt;button onClick = &#123; ( ) =&gt; <span class=\"keyword\">this</span>.props.dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_ACTION\"</span> &#125;) &#125;/&gt;</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.props.loading?</span><br><span class=\"line\">                    &lt;p&gt;Loading..&lt;<span class=\"regexp\">/p&gt; : this.props.error?</span></span><br><span class=\"line\"><span class=\"regexp\">                        &lt;p&gt;Error!&lt;/</span>p&gt; : &lt;p&gt;&#123;this.props.data&#125;&lt;/p&gt;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect( mapStateToProps, mapDispatchToProps )( myComponent );</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">For more advanced concepts, there is a well-organized <a href=\"https://redux-saga.js.org/docs/advanced/\" target=\"_blank\" rel=\"noopener\">Saga offical documentation</a> you can refer to if you want to dive deeper.</div><br></p>\n<h2 id=\"How-to-test-Saga\"><a href=\"#How-to-test-Saga\" class=\"headerlink\" title=\"How to test Saga?\"></a>How to test Saga?</h2><p><div style=\"text-align: justify\">A function that returns a simple object is easier to test than a function that directly makes an asynchronous call. For redux saga, each time you yield a function call will return a plain javascript object which makes the workflow much easier to test. You don’t need to use the real API, fake it, or mock it, instead just iterating over the generator function, asserting for equality on the values yielded.</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">describe( <span class=\"string\">\"fetch work flow\"</span>, ( ) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> generator = cloneableGenerator( callFetchAPI )(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_ACTION\"</span> &#125;);</span><br><span class=\"line\">    expect( generator.next( ).value ).toEqual( put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCHING\"</span>, <span class=\"attr\">payload</span>: ... &#125;) );</span><br><span class=\"line\"></span><br><span class=\"line\">    test( <span class=\"string\">\"fetch success\"</span>, ( ) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> clone = generator.clone( );</span><br><span class=\"line\">        expect( clone.next( ).value ).toEqual( put(&#123; <span class=\"attr\">type</span>: <span class=\"string\">\"FETCH_SUCCESS\"</span> &#125;) );</span><br><span class=\"line\">        expect( generator.next( ).done ).toEqual( <span class=\"literal\">true</span> );</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p><div style=\"text-align: justify\">In the above example, we use <strong>clone( )</strong> to test different control flows and <strong>next( )</strong> to iterate to the next function ready be yielded. The mock return value can also be injected as an argument of <strong>next( )</strong>:</div><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">expect( clone.next( <span class=\"literal\">false</span> ).value ).toEqual( put( fetchFailedAction( ) ) );</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h2 id=\"Saga-vs-Observables\"><a href=\"#Saga-vs-Observables\" class=\"headerlink\" title=\"Saga vs Observables\"></a>Saga vs Observables</h2><p><div style=\"text-align: justify\">Redux saga is not the only solution to our apps which may have complex control flows, they are other helpful tools providing different trade-offs which can also resolve the async problems. Here are some good <a href=\"https://hackmd.io/s/H1xLHUQ8e\" target=\"_blank\" rel=\"noopener\">code snippets</a> of saga vs observables that can open your mind :D</div><br><br><br><br></p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References:\"></a>References:</h2><p><a href=\"https://redux-saga.js.org/\" target=\"_blank\" rel=\"noopener\">https://redux-saga.js.org/</a><br><a href=\"https://stackoverflow.com/questions/25098066/what-is-callback-hell-and-how-and-why-rx-solves-it\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/25098066/what-is-callback-hell-and-how-and-why-rx-solves-it</a><br><a href=\"https://redux.js.org/advanced/middleware\" target=\"_blank\" rel=\"noopener\">https://redux.js.org/advanced/middleware</a><br><a href=\"https://pub.dartlang.org/packages/redux_thunk\" target=\"_blank\" rel=\"noopener\">https://pub.dartlang.org/packages/redux_thunk</a><br><a href=\"https://codeburst.io/how-i-test-redux-saga-fcc425cda018\" target=\"_blank\" rel=\"noopener\">https://codeburst.io/how-i-test-redux-saga-fcc425cda018</a><br><a href=\"https://engineering.universe.com/what-is-redux-saga-c1252fc2f4d1\" target=\"_blank\" rel=\"noopener\">https://engineering.universe.com/what-is-redux-saga-c1252fc2f4d1</a><br><a href=\"https://www.sitepoint.com/redux-without-react-state-management-vanilla-javascript/\" target=\"_blank\" rel=\"noopener\">https://www.sitepoint.com/redux-without-react-state-management-vanilla-javascript/</a><br><a href=\"https://redux.js.org/introduction/getting-started\" target=\"_blank\" rel=\"noopener\">https://redux.js.org/introduction/getting-started</a><br><a href=\"https://blog.logrocket.com/understanding-redux-saga-from-action-creators-to-sagas-2587298b5e71\" target=\"_blank\" rel=\"noopener\">https://blog.logrocket.com/understanding-redux-saga-from-action-creators-to-sagas-2587298b5e71</a></p>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2019-04-27T07:51:40.239Z","updated":"2019-04-27T07:51:40.239Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjv0i6e290002fhaok8q7caaj","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cjv0i6e1w0000fhao6asketh7","tag_id":"cjv0i6e2e0005fhaow4qem84v","_id":"cjv0i6e2g0007fhaocuh4jwwj"},{"post_id":"cjv0i6e1w0000fhao6asketh7","tag_id":"cjv0i8xdr0008fhao5ty9rt1b","_id":"cjv0i8xds000afhaok3900be6"},{"post_id":"cjv0i6e1w0000fhao6asketh7","tag_id":"cjv0i8xdr0009fhao2vvw2jh5","_id":"cjv0i8xds000bfhao4m04j7ft"}],"Tag":[{"name":"Redux Saga","_id":"cjv0i6e2b0004fhao0l5x7v0x"},{"name":"React","_id":"cjv0i6e2e0005fhaow4qem84v"},{"name":"Redux","_id":"cjv0i8xdr0008fhao5ty9rt1b"},{"name":"Saga","_id":"cjv0i8xdr0009fhao2vvw2jh5"}]}}